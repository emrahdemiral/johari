<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Johari Analiz</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    h2, h3 {
      text-align: center;
    }
    input, button {
      padding: 10px;
      margin: 10px 0;
      width: 100%;
      font-size: 16px;
    }
    .section {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
    }
    ul {
      columns: 2;
      padding-left: 20px;
    }
  </style>
</head>
<body>
  <h2>Johari Penceresi Analizi</h2>
  <p>Kendi adÄ±nÄ±zÄ± girerek Johari alanlarÄ±nÄ±zÄ± keÅŸfedin:</p>
  <input type="text" id="nameInput" placeholder="AdÄ±nÄ±zÄ± yazÄ±n">
  <button onclick="analyzeJohari()">Analizi GÃ¶ster</button>
  <div id="results"></div>

  <script>
    const traits = [
      "GÃ¼venilir","Destekleyici","PlanlÄ±","Adil","SonuÃ§ odaklÄ±","Sistemli","Mutlu",
      "Ä°nisiyatif alan","Analitik","Sakin","Vizyoner","Proaktif","Ä°lham verici","MantÄ±klÄ±",
      "Empatik","Pratik","Ä°yimser","Cesur","Ã‡atÄ±ÅŸma Ã§Ã¶zen","YardÄ±m eden","Ä°dealist",
      "KararlÄ±","Organize","SaygÄ±lÄ±","YapÄ±cÄ±","Yol gÃ¶sterici","Ã‡ok yÃ¶nlÃ¼","Sevecen",
      "TakÄ±m oyuncusu","Disiplinli","Ã‡Ã¶zÃ¼m odaklÄ±","GeliÅŸime aÃ§Ä±k","Ä°ÅŸbirliÄŸine aÃ§Ä±k","Ã–ÄŸrenmeye aÃ§Ä±k","Maharetli",
      "YenilikÃ§i","Net mesaj veren","Dinlemeyi bilen","Ä°fade gÃ¼cÃ¼ yÃ¼ksek","Kendini tanÄ±yan","EleÅŸtirel bakan","DÃ¼ÅŸÃ¼nceli",
      "Sorumluluk sahibi","Motive edici","YardÄ±msever","Ä°liÅŸki kurabilen","MeraklÄ±","Tutkulu","Ä°lgili",
      "Ä°kna edici","Uyumlu","HÄ±zlÄ± Ã¶ÄŸrenen","KapsayÄ±cÄ±","Nazik","Ã–zenli","Enerjik",
      "SabÄ±rlÄ±","Esnek","Ã–zgÃ¼venli","MÃ¼ÅŸteri odaklÄ±","Dengeli","Adaptif","DÄ±ÅŸa dÃ¶nÃ¼k",
      "SabÄ±rsÄ±z","Ä°natÃ§Ä±","Ä°Ã§e dÃ¶nÃ¼k","KÃ¶tÃ¼mser","EleÅŸtiriye kapalÄ±","KontrolcÃ¼","Asabi",
      "KararsÄ±z","KÄ±rÄ±lgan","DetaycÄ±","Sert Ã¼sluplu","Ã‡abuk demotive olan","Kibirli","Kontrol delisi",
      "Aceleci","SoÄŸuk","Gergin","Pasif","Dinlemeyen","AÅŸÄ±rÄ± eleÅŸtirel","KatÄ±"
    ];

    async function analyzeJohari() {
      const name = document.getElementById("nameInput").value.trim();
      if (!name) return alert("LÃ¼tfen adÄ±nÄ±zÄ± girin.");

      const res = await fetch("https://sheetdb.io/api/v1/ygs2xvq4fqvi3");
      const data = await res.json();

      const selfTraits = data.filter(row => row.name.toLowerCase() === name.toLowerCase() && row.mode === "self")
                             .flatMap(r => r.selected.split(", "));

      const otherTraitsRaw = data.filter(row => row.name.toLowerCase() === name.toLowerCase() && row.mode === "other");

      const otherCount = {};
      otherTraitsRaw.forEach(row => {
        row.selected.split(", ").forEach(trait => {
          otherCount[trait] = (otherCount[trait] || 0) + 1;
        });
      });

      const totalOther = otherTraitsRaw.length;

      const openArea = [];
      const blindArea = [];
      const hiddenArea = [];
      const unknownArea = [];

      traits.forEach(trait => {
        const inSelf = selfTraits.includes(trait);
        const inOther = otherCount[trait];

        if (inSelf && inOther) {
          openArea.push(`${trait} (%${Math.round((inOther / totalOther) * 100)})`);
        } else if (!inSelf && inOther) {
          blindArea.push(`${trait} (%${Math.round((inOther / totalOther) * 100)})`);
        } else if (inSelf && !inOther) {
          hiddenArea.push(trait);
        } else {
          unknownArea.push(trait);
        }
      });

      document.getElementById("results").innerHTML = `
        <div class="section"><h3>ğŸ”“ AÃ§Ä±k Alan</h3><ul>${openArea.map(t => `<li>${t}</li>`).join('')}</ul></div>
        <div class="section"><h3>ğŸ‘ï¸ KÃ¶r Alan</h3><ul>${blindArea.map(t => `<li>${t}</li>`).join('')}</ul></div>
        <div class="section"><h3>ğŸ”’ Gizli Alan</h3><ul>${hiddenArea.map(t => `<li>${t}</li>`).join('')}</ul></div>
        <div class="section"><h3>â” Bilinmeyen Alan</h3><ul>${unknownArea.map(t => `<li>${t}</li>`).join('')}</ul></div>
      `;
    }
  </script>
</body>
</html>
