<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Johari Analiz</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    .selector-group {
      text-align: center;
      margin-bottom: 20px;
    }
    select {
      padding: 8px;
      width: 220px;
      margin-top: 8px;
    }
    .johari-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, auto);
      gap: 20px;
      margin-top: 30px;
    }
    .johari-box {
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .johari-box h3 {
      margin-top: 0;
      font-size: 16px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
  </style>
</head>
<body>
  <h2>Johari Analiz</h2>
  <p style="text-align:center;">Johari penceresini görmek istediğiniz ismi seçin</p>
  <div class="selector-group">
    <select id="nameSelect">
      <option value="">İsim seçin</option>
    </select>
  </div>
  <div id="johariWindow" class="johari-grid" style="display:none">
    <div class="johari-box">
      <h3>Açık Alan (Herkes biliyor)</h3>
      <ul id="acikAlan"></ul>
    </div>
    <div class="johari-box">
      <h3>Kör Alan (Başkaları biliyor)</h3>
      <ul id="korAlan"></ul>
    </div>
    <div class="johari-box">
      <h3>Gizli Alan (Kendisi biliyor)</h3>
      <ul id="gizliAlan"></ul>
    </div>
    <div class="johari-box">
      <h3>Bilinmeyen Alan (Kimse bilmiyor)</h3>
      <ul id="bilinmeyenAlan"></ul>
    </div>
  </div>

  <script>
    const nameSelect = document.getElementById("nameSelect");
    const johariWindow = document.getElementById("johariWindow");

    fetch("https://sheetdb.io/api/v1/ygs2xvq4fqvi3?sheet=isimler")
      .then(res => res.json())
      .then(data => {
        const names = [...new Set(data.map(entry => entry.name).filter(n => n))];
        nameSelect.innerHTML += names.map(name => `<option value="${name}">${name}</option>`).join('');
      });

    nameSelect.onchange = () => {
      const selectedName = nameSelect.value.trim();
      if (!selectedName) return;

      fetch("https://sheetdb.io/api/v1/ygs2xvq4fqvi3")
        .then(res => res.json())
        .then(data => {
          const selfEntries = data.filter(entry => entry.name.toLowerCase() === selectedName.toLowerCase() && entry.mode === "self");
          const otherEntries = data.filter(entry => entry.name.toLowerCase() === selectedName.toLowerCase() && entry.mode === "other");

          const selfTraits = new Set(selfEntries.flatMap(e => e.selected.split(',').map(s => s.trim())));
          const otherTraits = new Set(otherEntries.flatMap(e => e.selected.split(',').map(s => s.trim())));

          const acikAlan = [...selfTraits].filter(x => otherTraits.has(x));
          const korAlan = [...otherTraits].filter(x => !selfTraits.has(x));
          const gizliAlan = [...selfTraits].filter(x => !otherTraits.has(x));
          const bilinmeyenAlan = [...new Set([...traits])].filter(x => !selfTraits.has(x) && !otherTraits.has(x));

          document.getElementById("acikAlan").innerHTML = acikAlan.map(x => `<li>${x}</li>`).join('');
          document.getElementById("korAlan").innerHTML = korAlan.map(x => `<li>${x}</li>`).join('');
          document.getElementById("gizliAlan").innerHTML = gizliAlan.map(x => `<li>${x}</li>`).join('');
          document.getElementById("bilinmeyenAlan").innerHTML = bilinmeyenAlan.map(x => `<li>${x}</li>`).join('');

          johariWindow.style.display = 'grid';
        });
    };

    const traits = [
      "Güvenilir", "Destekleyici", "Planlı", "Adil", "Sonuç odaklı", "Sistemli", "Mutlu",
      "İnisiyatif alan", "Analitik", "Sakin", "Vizyoner", "Proaktif", "İlham verici", "Mantıklı",
      "Empatik", "Pratik", "İyimser", "Cesur", "Çatışma çözen", "Yardım eden", "İdealist",
      "Kararlı", "Organize", "Saygılı", "Yapıcı", "Yol gösterici", "Çok yönlü", "Sevecen",
      "Takım oyuncusu", "Disiplinli", "Çözüm odaklı", "Gelişime açık", "İşbirliğine açık", "Öğrenmeye açık", "Maharetli",
      "Yenilikçi", "Net mesaj veren", "Dinlemeyi bilen", "İfade gücü yüksek", "Kendini tanıyan", "Eleştirel bakan", "Düşünceli",
      "Sorumluluk sahibi", "Motive edici", "Yardımsever", "İlişki kurabilen", "Meraklı", "Tutkulu", "İlgili",
      "İkna edici", "Uyumlu", "Hızlı öğrenen", "Kapsayıcı", "Nazik", "Özenli", "Enerjik",
      "Sabırlı", "Esnek", "Özgüvenli", "Müşteri odaklı", "Dengeli", "Adaptif", "Dışa dönük",
      "Sabırsız", "İnatçı", "İçe dönük", "Kötümser", "Eleştiriye kapalı", "Kontrolcü", "Asabi",
      "Kararsız", "Kırılgan", "Detaycı", "Sert üsluplu", "Çabuk demotive olan", "Kibirli", "Kontrol delisi",
      "Aceleci", "Soğuk", "Gergin", "Pasif", "Dinlemeyen", "Aşırı eleştirel", "Katı"
    ];
  </script>
</body>
</html>
